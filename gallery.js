const days = {
    one: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },
    two: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },
    three: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },
    four: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },
    five: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },
    six: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },
    seven: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },
    eight: {
        thumbnail: "./assets/imgs/placeholder.jpg",
        images: [
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
            ["Image Caption", "./assets/imgs/placeholder.jpg"],
        ]
    },

    // five: {
    //     thumbnail: "./images/gallery-placeholder.png",
    //     images: [
    //         ["caption1", "./images/gallery-placeholder.png"],
    //         ["caption2", "./images/gallery-placeholder.png"],
    //         ["caption3", "./images/gallery-placeholder.png"],
    //         ["caption4", "./images/gallery-placeholder.png"],
    //         ["caption5", "./images/gallery-placeholder.png"],
    //         ["caption6", "./images/gallery-placeholder.png"],
    //         ["caption7", "./images/gallery-placeholder.png"],
    //         ["caption8", "./images/gallery-placeholder.png"],
    //         ["caption9", "./images/gallery-placeholder.png"],
    //         ["caption10", "./images/gallery-placeholder.png"],
    //         ["caption11", "./images/gallery-placeholder.png"],
    //         ["caption12", "./images/gallery-placeholder.png"],
    //         ["caption13", "./images/gallery-placeholder.png"],
    //         ["caption14", "./images/gallery-placeholder.png"],
    //         ["caption15", "./images/gallery-placeholder.png"],
    //         ["caption16", "./imgs/gallery-placeholder.png"],
    //     ]
    // },
}
// object = {day:{thumbnail,images:[[caption,image]]}}

//url params
const queryString = window.location.search;
let day_query = new URLSearchParams(queryString).get("day")

// create cards
const FormatCard = (thumbnail, i, caption) => {
    if (day_query == null || !(Number(day_query) >= 0))     // i = day
        return `<div style="animation-delay:${i * 50}ms" class="card cursor-pointer w-full max-w-xs bg-black rounded-lg shadow-md">
        <img class=" rounded-t-lg" src="${thumbnail}" />
        <div class="px-3 pb-3 mt-3">
           <div class="flex justify-between items-center">
              <h5 class="text-xl font-semibold tracking-tight text-primary">Day ${i}</h5>
              <a href="${"./gallery.html?day=" + i}" class="btn text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center">View More</a>
           </div>
        </div>
     </div>`
    else if (day_query <= Object.keys(days).length) { // i = image index
        createPagination()
        return `<div style="animation-delay:${i * 50}ms" class="card  cursor-pointer w-full max-w-xs bg-powderblue rounded-lg shadow-md">
        <img id="day-img-${i}" day-image class=" rounded-t-lg" src="${thumbnail}" />
        <div class="px-3 pb-3 mt-3">
           <div class="flex justify-center items-center">
              <h5 class="text-xl font-semibold tracking-tight text-primary text-center">${caption}</h5>
           </div>
        </div>
     </div>`
    }
}

//pagination
const FormatLinks = (day) => {
    if (day == day_query) {
        return (
            `<li>
            <a href="./gallery.html?day=${day}" aria-current="page" class="mx-1 z-10 py-2 px-3 leading-tight border border-blue-700 text-primary bg-blue-300 hover:text-gray-700 hover:bg-cyan-500">${day}</a>
        </li>`
        )
    }
    return (
        `<li>
        <a href="./gallery.html?day=${day}" class="mx-1 bg-powderblue py-2 px-3 leading-tight text-primary border border-blue-400 hover:bg-blue-200 hover:text-gray-700">${day}</a>
    </li>`
    )
}

const createPagination = () => {
    let pages = ``

    array = Object.keys(days)
    for (let i = 0; i < array.length; i++) {
        pages += FormatLinks(i + 1)
    }
    document.getElementById("pagination-cont").style.display = "flex"
    document.getElementById("pagination").innerHTML = pages
}

let cards = ""
let i = 1;
if (day_query == null || !(Number(day_query) >= 0)) {
    for (const day in days) {
        cards += FormatCard(days[day].thumbnail, i)
        i++
    }
} else {
    let array = Object.keys(days)
    img_arr = days[array[Number(day_query) - 1]].images
    for (img of img_arr) {
        cards += FormatCard(img[1], i - 1, img[0]) // image, index, caption
        i++
    }
}
setTimeout(() => {
    let images = document.querySelectorAll('img[day-image]')
    console.log(images)
    for (i of images) {
        console.log('f')
        i.addEventListener("click", (e) => {
            console.log("wha")
            let image_index = e.target.id.split("-")[2]
            OpenSlideShow(day_query, image_index)
        })
    }
}, 0);

// inject cards
document.getElementById("main-grid").innerHTML = cards

//create slideshow
const FormatSlide = (image, i, caption) => {
    return `<div class="mySlides fade">
    <div class="numbertext bg-black bg-opacity-50">Day ${i}</div>
    <img src="${image}" class="w-full">
    <div class="text w-full bg-black bg-opacity-50">${caption}</div>
  </div>`
}

let slideIndex = 1;
const OpenSlideShow = (day, index) => {
    document.getElementById("black-box").style.display = "flex"
    index = Number(index) + 1
    let slides = ""
    array = Object.keys(days)
    for (const image_info of days[array[day - 1]].images) {
        [caption, image] = image_info
        slides += FormatSlide(image, day, caption)
    }
    slides += `<a class="prev" onclick="plusSlides(-1)">&#10094;</a>
    <a class="next" onclick="plusSlides(1)">&#10095;</a>`
    document.getElementById("slideshow").innerHTML = slides
    currentSlide(index)
}

const CloseSlideShow = () => {
    document.getElementById("black-box").style.display = "none"
}

// Next/previous controls
function plusSlides(n) {
    showSlides(slideIndex += n);
}

// Thumbnail image controls
function currentSlide(n) {
    showSlides(slideIndex = n);
}

function showSlides(n) {
    let i;
    let slides = document.getElementsByClassName("mySlides");
    if (n > slides.length) { slideIndex = 1 }
    if (n < 1) { slideIndex = slides.length }
    for (i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";
    }

    slides[slideIndex - 1].style.display = "block";
}

